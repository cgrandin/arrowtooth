## Bridge model figures

(ref:fig-bridge-biomass-en) Maximum Posterior Density (MPD) estimates of spawning biomass (top panel) and relative spawning biomass (bottom panel). Points on the left represent $R_0$ values.

(ref:fig-bridge-biomass-fr) French caption here

```{r bridge-biomass, fig.cap = ifelse(fr(), "(ref:fig-bridge-biomass-fr)", "(ref:fig-bridge-biomass-en)"), out.width = "100%"}
base_ind <- 10
mdl_grp <- 1
cowplot::plot_grid(
  plot_biomass_mcmc(models$bridge_grps[[mdl_grp]],
                    legend_title = "Bridge models",
                    angle_x_labels = TRUE,
                    ylim = c(0, 1000)),
  plot_biomass_mcmc(models$bridge_grps[[mdl_grp]],
                    rel = TRUE,
                    legend_title = paste0("Bridge models group ", mdl_grp),
                    angle_x_labels = TRUE,
                    ylim = c(0, 1.5)))

```

(ref:fig-bridge-recr-en) Maximum Posterior Density (MPD) estimates of recruitment. Points on the left represent $R_0$ estimates.

(ref:fig-bridge-recr-fr) French caption here

```{r bridge-recruitment, fig.cap = ifelse(fr(), "(ref:fig-bridge-recr-fr)", "(ref:fig-bridge-recr-en)"), out.width = "100%" , fig.pos="H"}
plot_recr_mcmc(models$bridge_grps[[mdl_grp]],
               legend_title = paste0("Bridge models group ", mdl_grp),
               angle_x_labels = TRUE,
               leg_loc = c(0, 1)) # legend on top left 
```

(ref:fig-bridge-index-fits-en) Maximum Posterior Density (MPD) index fits. The black points with bars represent the index data points and CVs as calculated using the bootstrapping method included in the GFBioSQL database. The lines representing the fits are just connecting the point estimates and they are not meant to represent data between the points. They are a visual aid only.

(ref:fig-bridge-index-fits-fr) French caption here

```{r bridge-index-fits, fig.cap = ifelse(fr(), "(ref:fig-bridge-index-fits-fr)", "(ref:fig-bridge-index-fits-en)"), out.width = "100%" , fig.pos = "H"}
plot_index_mcmc(models$bridge_grps[[mdl_grp]],
                surv_index = survey_index,
                legend_title = "Bridge models",
                leg_loc = "facet")
```

```{r bridging-para-11-en, eval = !fr(), results = 'asis'}
cat("## Index residuals")
```
```{r bridging-para-11-fr, eval = fr(), results = 'asis', needs_trans = TRUE}
<<bridging-para-11-en>>
```

(ref:fig-bridge-index-resids) Log standardized residuals for the indices used in the first four bridge models.

```{r bridge-index-resids-qcs, fig.cap = "(ref:fig-bridge-index-resid-qcs)", fig.pos = "H"}
legend <- cowplot::get_legend(plot_index_mcmc(models$bridge_grps[[1]],
                                              type = "resids",
                                              gear = 1,
                                              surv_index = survey_index))
p <- cowplot::plot_grid(
  plot_index_mcmc(models$bridge_grps[[1]],
                  type = "resids",
                  gear = 1,
                  surv_index = survey_index,
                  leg_loc = NULL),
  plot_index_mcmc(models$bridge_grps[[1]],
                  type = "resids",
                  gear = 2,
                  surv_index = survey_index,
                  leg_loc = NULL),
  plot_index_mcmc(models$bridge_grps[[1]],
                  type = "resids",
                  gear = 3,
                  surv_index = survey_index,
                  leg_loc = NULL),
  plot_index_mcmc(models$bridge_grps[[1]],
                  type = "resids",
                  gear = 4,
                  surv_index = survey_index,
                  leg_loc = NULL),
  plot_index_mcmc(models$bridge_grps[[1]],
                  type = "resids",
                  gear = 5,
                  surv_index = survey_index,
                  leg_loc = NULL))
  # Place legend in empty grid cell
  p + cowplot::draw_grob(legend, 2/3, -1/6, 1/3, 0.5)
```

\clearpage
