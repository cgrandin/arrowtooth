# Figures


<!-- Growth -------------------------------------------------------------->

(ref:fig-vb-en) 
The length-age growth curve is a von Bertalanffy model. 
<!-- of the form $L_i \\sim \\operatorname{Log-normal} \\left( \\log(l_\\mathrm{inf} (1 - \\exp(-k (A_i - t_0)))), \\sigma \\right)$ where $L_i$ and $A_i$ represent the length and age of fish $i$, $l_\\mathrm{inf}$, $k$, and $t_0$ represent the von Bertalanffy growth parameters, and $\\sigma$ represents the scale parameter. -->
Female model fits are indicated as solid black lines and male model fits are indicated as dashed grey lines. 
Text on the panels shows the parameter estimates and open grey circles represent individual fish that the models are fit to. 
<!-- These figures include all survey samples.  -->
<!-- `r base_model$dat$start.yr` to `r base_model$dat$end.yr` for `r sp`.  -->

(ref:fig-vb-fr) TODO

```{r fig-vb, fig.cap = ifelse(fr(), "(ref:fig-vb-fr)", "(ref:fig-vb-en)"), out.width = "6in"}
plot_vb_panels <- function(data){
vb_m <- fit_vb(data, sex = "male", method = "tmb",
      too_high_quantile = 1)
vb_f <- fit_vb(data, sex = "female", method = "tmb",
      too_high_quantile = 1)

plot_vb(object_female = vb_f, object_male = vb_m, french = fr()) +
      guides(colour = "none", fill = "none", lty = "none") +
  # not sure why I can't force the axes to be the same?
      # scale_x_continuous(limits = c(0, 30)) + scale_y_continuous(limits = c(0,70)) +
      theme(axis.title = element_blank())
      # xlab(en2fr("Age (years)", french)) + ylab(paste0(en2fr("Length",french), " (cm)"))
}

g_cw <- dat$survey_samples %>% 
  filter(survey_series_id %in% c(1, 3, 4, 16)) %>% 
  plot_vb_panels() + ggtitle(en2fr("Coastwide", fr())) 

g_1 <- dat$survey_samples %>% 
  filter(survey_series_id %in% c(1)) %>% 
  plot_vb_panels() + ggtitle(en2fr("SYN QCS (5AB)", fr())) 

g_3 <- dat$survey_samples %>% 
  filter(survey_series_id %in% c(3)) %>% 
  plot_vb_panels() + ggtitle(en2fr("SYN HS (5CD)", fr()))

g_4 <- dat$survey_samples %>% 
  filter(survey_series_id %in% c(4)) %>% 
  plot_vb_panels() + ggtitle(en2fr("SYN WCVI (3CD)", fr())) 

grid.arrange(g_3, g_1, g_4, g_cw,
             ncol = 2,
             left = paste0(en2fr("Length", fr()), " (cm)"),
             bottom = en2fr("Age (years)", fr()))

```

<!-- Catch/CPUE -------------------------------------------------------------->

(ref:fig-catch-spatial-en) Spatial distribution of commercial catch from
`r base_model$dat$start.yr` to `r base_model$dat$end.yr` for `r sp`. 
The colour scale is log10 transformed. 
Cells are 7 km wide and are only shown in cases where there are at least 3 unique vessels in a given cell to meet privacy requirements.

(ref:fig-catch-spatial-fr) Distribution spatiale des captures commerciales de
`r base_model$dat$start.yr` à `r base_model$dat$end.yr` pour `r sp`. 
L'échelle de couleurs est transformée en log10. 
Les cellules sont larges de 7 km et ne sont indiquées que dans les cas où il y a au moins trois bateaux uniques dans une cellule donnée pour qu’on puisse satisfaire aux exigences en matière de confdentialité.

```{r fig-catch-spatial, fig.cap = ifelse(fr(), "(ref:fig-catch-spatial-fr)", "(ref:fig-catch-spatial-en)"), out.width = "6in"}
plot_catch_spatial(dat$catch_spatial, 
                   start_year = base_model$dat$start.yr,
                   fill_scale = ggplot2::scale_fill_viridis_c(trans = "log10", option = "D"),
                   colour_scale = ggplot2::scale_colour_viridis_c(trans = "log10", option = "D")
  )
```

(ref:fig-cpue-spatial-en) Spatial distribution of commercial CPUE from
`r base_model$dat$start.yr` to `r base_model$dat$end.yr` for `r sp`.
The colour scale is log10 transformed. 
Cells are 7 km wide and are only shown in cases where there are at least 3 unique vessels in a given cell to meet privacy requirements.


(ref:fig-cpue-spatial-fr) Distribution spatiale de la CPUE commerciales de
`r base_model$dat$start.yr` à `r base_model$dat$end.yr` pour `r sp`.
L'échelle de couleurs est transformée en log10. 
Les cellules sont larges de 7 km et ne sont indiquées que dans les cas où il y a au moins trois bateaux uniques dans une cellule donnée pour qu’on puisse satisfaire aux exigences en matière de confdentialité.


```{r fig-cpue-spatial, fig.cap = ifelse(fr(), "(ref:fig-cpue-spatial-fr)", "(ref:fig-cpue-spatial-en)"), out.width = "6in"}
plot_cpue_spatial(dat$cpue_spatial, 
                  start_year = base_model$dat$start.yr,
                  fill_scale = ggplot2::scale_fill_viridis_c(trans = "log10", option = "D"),
                  colour_scale = ggplot2::scale_colour_viridis_c(trans = "log10", option = "D"))
```

(ref:fig-catch-en) Commercial catch of `r sp` by area.

(ref:fig-catch-fr) Captures commerciales de `r en2fr(sp)` par zone.

```{r fig-catch, fig.cap = ifelse(fr(), "(ref:fig-catch-fr)", "(ref:fig-catch-en)")}
yrs <- sort(unique(catch$year))
plot_catch(catch, french = fr(), xlim = c(min(yrs), max(yrs))) +
  scale_x_continuous(yrs, breaks = seq(min(yrs), yrs[length(yrs)], by = 2)) +
  theme(axis.text.x = element_text(angle = 45, hjust = 0.55, vjust = 0.5))
```

<!-- Biomass and recruitment -------------------------------------------------->

(ref:fig-base-sb-en) Spawning biomass of `r sp` for the base model with
$B_{MSY}$ reference points. The
solid black line is the median of the posteriors, the shaded ribbon
encapsulated by dotted lines covers the 95% Credible interval for the
posteriors, the point at $B_0$ is the median estimate for the unfished
biomass, and the vertical line over that point is the 95% Credible interval
for that parameter.

(ref:fig-base-sb-fr) French here

```{r fig-base-sb, fig.cap = ifelse(fr(), "(ref:fig-base-sb-fr)", "(ref:fig-base-sb-en)")}
plot_biomass_mcmc(base_model,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bmsy_lines = TRUE)
```

(ref:fig-base-sb-bo-en) Spawning biomass of `r sp` for the base model with
$B_0$ reference points. See Figure \@ref(fig:fig-base-sb) for more information.

(ref:fig-base-sb-bo-fr) French here

```{r fig-base-sb-bo, fig.cap = ifelse(fr(), "(ref:fig-base-sb-bo-fr)", "(ref:fig-base-sb-bo-en)")}
plot_biomass_mcmc(base_model,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-base-sb-vuln-compare-en) Spawning biomass of `r sp` for the base model compared with vulnerable biomass for the trawl fisheries for the base model. The spawning biomass is in black and has its 95% credible interval shaded. The two blue vulnerable biomass trajectories have their 95% credible interval contained withing the dotted lines of their respective colors.

(ref:fig-base-sb-vuln-compare-fr) French here

```{r fig-base-sb-vuln-compare, fig.cap = ifelse(fr(), "(ref:fig-base-sb-vuln-compare-fr)", "(ref:fig-base-sb-vuln-compare-en)")}
plot_vuln_mcmc(base_model,
               inc_sbt = TRUE,
               quant_df = "sbt_quants",
               angle_x_labels = TRUE)
```
(ref:fig-base-recr-en) Recruitment of `r sp` for the base model. The
black points are the medians of the posteriors, the vertical black lines
are the 95% Credible intervals for the posteriors, the point at $R_0$
is the median estimate for the initial recruitment parameter $R_0$,
and the vertical line over that point and shaded ribbon across the time series
is the 95% Credible interval for that parameter.

(ref:fig-base-recr-fr) Recrutement de `r en2fr(sp)` pour le modèle de base.
Les points noirs de points noirs sont les médianes des postérieurs, les
lignes noires verticales sont les intervalles crédibles à 95 % pour les
valeurs postérieures, le point à $R_0$ est l'estimation médiane du paramètre
de recrutement initial $R_0$ est l'estimation médiane pour le paramètre de
recrutement initial $R_0$, et la ligne verticale sur ce point et le ruban
ombragé sur la série temporelle est l'intervalle crédible à 95% pour ce
paramètre.

```{r fig-base-recr, fig.cap = ifelse(fr(), "(ref:fig-base-recr-fr)", "(ref:fig-base-recr-en)")}
plot_recr_mcmc(base_model, angle_x_labels = TRUE, text_title_size = NULL)
```

<!-- Fishing mortality ------------------------------------------------------->

(ref:fig-base-f-en) Fishing mortality for the base model for the two trawl fisheries. The shaded area represents the 95\\% credible interval.

(ref:fig-base-f-fr) French here

```{r fig-base-f, fig.cap = ifelse(fr(), "(ref:fig-base-f-fr)", "(ref:fig-base-f-en)")}
plot_f_mcmc(base_model, angle_x_labels = TRUE, text_title_size = NULL)
```

<!-- Relative spawning biomass ----------------------------------------------->

(ref:fig-base-depletion-en) Relative spawning biomass for the base model. The shaded area represents the 95% credible interval.

(ref:fig-base-depletion-fr) French here

```{r fig-base-depletion, fig.cap = ifelse(fr(), "(ref:fig-base-depletion-fr)", "(ref:fig-base-depletion-en)")}
plot_biomass_mcmc(base_model,
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL)
```


<!-- MCMC diagnostics -------------------------------------------------------->

(ref:fig-base-priors-posts-en) Prior probability distributions used in the base model (blue shaded areas) overlaid with posterior distribution histograms. The solid red line is the mode of the prior distribution, the vertical solid black line is the mean of the prior, and the vertical dashed black lines represent one standard deviation from the mean. Plots that are entirely shaded blue show uniform priors which are shaded underneath the prior value.

(ref:fig-base-priors-posts-fr)  Distributions de probabilité antérieures utilisées dans le modèle de base (zones ombrées en bleu) superposées aux histogrammes de distribution postérieure. La ligne rouge pleine est le mode de la distribution antérieure, la ligne noire pleine verticale est la moyenne de la distribution antérieure, et les lignes noires pointillées verticales représentent un écart type de la moyenne. Les graphiques qui sont entièrement ombrés en bleu montrent des antériorités uniformes qui sont ombrées sous la valeur de l'antériorité.

```{r fig-base-priors-posts, fig.cap = ifelse(fr(), "(ref:fig-base-priors-posts-fr)", "(ref:fig-base-priors-posts-en)")}
plot_priors_posts_mcmc(base_model, text_title_size = NULL)
```

(ref:fig-base-trace-en) Trace plots for MCMC output of estimated lead parameters in the base model. The MCMC run has chain length `r f(mcmc_chain_length)` with a sample taken every `r f(mcmc_sample_freq)`^th^ iteration. Of the `r f(mcmc_num_samples)` samples taken, the first 1,000 were removed as a burn-in period. $q$ parameters represent catchability for the survey indices, with numerical indices representing: `r paste(base_index_gears$gear, " = ", base_index_gears$gear_name, collapse = ", ")`.

(ref:fig-base-trace-fr) Tracés pour la sortie MCMC des paramètres de plomb estimés dans le modèle de base. L'exécution MCMC a une longueur de chaîne `r f(mcmc_chain_length)` avec un échantillon pris chaque `r f(mcmc_sample_freq)`^ème^ itération. Parmi les `r f(mcmc_num_samples)` échantillons prélevés, les 1 000 premiers ont été retirés pour servir de période de rodage. Les paramètres $q$ représentent la capturabilité pour les indices de l'enquête, les indices numériques représentant : `r paste(base_index_gears$gear, " = ", base_index_gears$gear_name, collapse = ", ")`.

```{r fig-base-trace, fig.cap = ifelse(fr(), "(ref:fig-base-trace-fr)", "(ref:fig-base-trace-en)")}
plot_traces_mcmc(base_model,
                 plot_sel = FALSE, 
                 param_rm = c("m1", "m2", "rho", "vartheta", "ssb",
                              "msy1", "msy2", "fmsy1", "fmsy2", "umsy1", "umsy2",
                              "bmsy", "bo", "sbo"),
                 text_title_size = NULL)
```

(ref:fig-base-autocor-en) Autocorrelation plots for MCMC output of estimated lead parameters in the base model. See Figure \@ref(fig:fig-base-trace) for parameter descriptions.

(ref:fig-base-autocor-fr) Graphiques d'autocorrélation pour la sortie MCMC des paramètres de plomb estimés dans le modèle de base. Voir la figure \@ref(fig:fig-base-trace) pour la description des paramètres.

```{r fig-base-autocor, fig.cap = ifelse(fr(), "(ref:fig-base-autocor-fr)", "(ref:fig-base-autocor-en)")}
plot_autocor_mcmc(base_model, 
                  plot_sel = FALSE, 
                  param_rm = c("m1", "m2", "rho", "vartheta", "ssb",
                               "msy1", "msy2", "fmsy1", "fmsy2", "umsy1", "umsy2",
                               "bmsy", "bo", "sbo"),
                  text_title_size = NULL)
```

(ref:fig-base-trace-selex-en) Trace plots for MCMC output of estimated selectivity parameters in the base model. $\hat{a}$ are the estimates of selectivity-at-age-50%, $\hat{\gamma}$ are the estimated standard deviations on selectivity-at-age-50%. The numerical indices on the two parameters represent: `r paste(base_all_gears$gear, " = ", base_all_gears$gear_name, collapse = ", ")`.

(ref:fig-base-trace-selex-fr) Tracés de la sortie MCMC des paramètres de sélectivité estimés dans le modèle de base. Les $\hat{a}$ sont les estimations de la sélectivité à l'âge de 50 %, les $\hat{\gamma}$ sont les écarts types estimés de la sélectivité à l'âge de 50 %. Les indices numériques sur les deux paramètres représentent : `r paste(base_all_gears$gear, " = ", base_all_gears$gear_name, collapse = ", ")`.

```{r fig-base-trace-selex, fig.cap = ifelse(fr(), "(ref:fig-base-trace-selex-fr)", "(ref:fig-base-trace-selex-en)")}
plot_traces_mcmc(base_model,
                 plot_sel = TRUE, 
                 param_rm = c("m1", "m2", "rho", "vartheta", "ssb",
                              "msy1", "msy2", "fmsy1", "fmsy2", "umsy1", "umsy2",
                              "bmsy", "bo", "sbo"),
                 text_title_size = NULL)
```

(ref:fig-base-autocor-selex-en) Autocorrelation plots for MCMC output of estimated selectivity parameters in the base model. See Figure \@ref(fig:fig-base-trace-selex) for parameter descriptions.

(ref:fig-base-autocor-selex-fr) Graphiques d'autocorrélation pour la sortie MCMC des paramètres de sélectivité estimés dans le modèle de base. Voir la figure \@ref(fig:fig-base-trace-selex) pour la description des paramètres.

```{r fig-base-autocor-selex, fig.cap = ifelse(fr(), "(ref:fig-base-autocor-selex-fr)", "(ref:fig-base-autocor-selex-en)")}
plot_autocor_mcmc(base_model, 
                  plot_sel = TRUE, 
                  param_rm = c("m1", "m2", "rho", "vartheta", "ssb",
                               "msy1", "msy2", "fmsy1", "fmsy2", "umsy1", "umsy2",
                               "bmsy", "bo", "sbo"),
                  text_title_size = NULL)
```

(ref:fig-base-pairs-en) Pairs plots for MCMC estimated parameters in the base model. The lines in the points plots in the lower triangular panels are linear models with shaded 95% confidence intervals. The line plots in the diagonal panels represent density of the parameter values, and the values in the upper triangular panels are the correlations between parameters with text size being directly proportional to the absolute value of those values. See Figure \@ref(fig:fig-base-trace) for parameter descriptions.

(ref:fig-base-pairs-fr) Diagrammes de paires pour les paramètres estimés par MCMC dans le modèle de base. Les lignes dans les tracés de points dans les panneaux triangulaires inférieurs sont des modèles linéaires avec des intervalles de confiance à 95% ombrés. Les tracés de lignes dans les panneaux diagonaux représentent la densité des valeurs des paramètres, et les valeurs dans les panneaux triangulaires supérieurs sont les corrélations entre les paramètres, la taille du texte étant directement proportionnelle à la valeur absolue de ces valeurs. Voir la figure \@ref(fig:fig-base-trace) pour la description des paramètres.

```{r fig-base-pairs, fig.cap = ifelse(fr(), "(ref:fig-base-pairs-fr)", "(ref:fig-base-pairs-en)")}
plot_pairs_mcmc(base_model,
                plot_sel = FALSE,
                param_rm = c("m1", "m2", "rho", "vartheta", "ssb",
                             "msy1", "msy2", "fmsy1", "fmsy2", "umsy1", "umsy2",
                             "bmsy", "bo", "sbo"),
                text_title_size = NULL)
```

<!-- Index fits and residuals ------------------------------------------------>

(ref:fig-base-index-fits-en) Index fits for the base model. The light brown points and vertical lines show the index values and CVs; the black points show the medians of the posteriors; the black solid vertical lines show the 95% credible intervals for the posteriors. The two lines connecting points along the time series are only present for aesthetic value. The 2014 WCHG Synoptic index point is shown but was not included in the model.

(ref:fig-base-index-fits-fr) Ajustements de l'indice pour le modèle de base. Les points et les lignes verticales marron clair montrent les valeurs de l'indice et les CV ; les points noirs montrent les médianes des valeurs postérieures ; les lignes verticales pleines noires montrent les intervalles crédibles à 95% pour les valeurs postérieures. Les deux lignes reliant les points le long de la série chronologique ne sont présentes que pour des raisons esthétiques. Le point d'indice Synoptic WCHG de 2014 est indiqué mais n'a pas été inclus dans le modèle.

```{r fig-base-index-fits, fig.cap = ifelse(fr(), "(ref:fig-base-index-fits-fr)", "(ref:fig-base-index-fits-en)")}
plot_index_mcmc(base_model,
                type = "fits",
                surv_index = survey_index,
                leg_loc = NULL,
                text_title_size = NULL)
```

(ref:fig-base-index-resids-en) Index Log standardized residuals. The points are the median of the posteriors for the $\epsilon$ parameter in iSCAM. The vertical lines represent the 95% credible intervals for those posteriors.

(ref:fig-base-index-resids-fr) Indice Log des résidus normalisés. Les points représentent la médiane des valeurs postérieures pour le paramètre $\epsilon$ dans iSCAM. Les lignes verticales représentent les intervalles crédibles à 95 % pour ces valeurs postérieures.

```{r fig-base-index-resids, fig.cap = ifelse(fr(), "(ref:fig-base-index-resids-fr)", "(ref:fig-base-index-resids-en)")}
plot_index_mcmc(base_model,
                type = "resids",
                surv_index = survey_index,
                leg_loc = NULL,
                text_title_size = NULL)
```

\clearpage

<!-- Age fits and residuals -------------------------------------------------->

(ref:fig-base-age-fits-ft-en) Age composition fits for each sex for the Freezer trawler fleet. The black dots with vertical bars are the age composition data points. The red points are the medians of the posteriors for each age. The red shaded area with dotted edge represents the 95% credible intervals. The solid red line that connects the median posterior points is shown for aesthetics.

(ref:fig-base-age-fits-ft-fr) French here

```{r fig-base-age-fits-ft, fig.cap = ifelse(fr(), "(ref:fig-base-age-fits-ft-fr)", "(ref:fig-base-age-fits-ft-en)")}
plot_age_fits_mcmc(base_model, gear = 1, text_title_size = NULL)
```

(ref:fig-base-age-resids-ft-en) Age composition log standardized residuals for each sex for the Freezer trawler fleet. The boxplots have boxes that range from the 25^th^ to 75^th^ percentiles. The whiskers extend to 1.5 x the Interquartile range (IRQ - distance between the first and third quartiles). Plus symbols are outliers from the range of 1.5 x IRQ.

(ref:fig-base-age-resids-ft-fr) French here

```{r fig-base-age-resids-ft, fig.cap = ifelse(fr(), "(ref:fig-base-age-resids-ft-fr)", "(ref:fig-base-age-resids-ft-en)")}
plot_age_resids_mcmc(base_model, gear = 1, text_title_size = NULL)
```

\clearpage

(ref:fig-base-age-fits-ss-firsthalf-en) Age composition fits for each sex for the Shoreside fleet from 1996--2007. The black dots with vertical bars are the age composition data points. The red points are the medians of the posteriors for each age. The red shaded area with dotted edge represents the 95% credible intervals. The solid red line that connects the median posterior points is shown for aesthetics.

(ref:fig-base-age-fits-ss-firsthalf-fr) French here

```{r fig-base-age-fits-firsthalf-ss, fig.cap = ifelse(fr(), "(ref:fig-base-age-fits-ss-firsthalf-fr)", "(ref:fig-base-age-fits-ss-firsthalf-en)")}
plot_age_fits_mcmc(base_model, gear = 2, yrs = 1996:2007, text_title_size = NULL)
```

(ref:fig-base-age-fits-ss-secondhalf-en) Age composition fits for each sex for the Shoreside fleet from 2008--2019. See Figure \@ref(fig:fig-base-age-fits-firsthalf-ss) for plot details.

(ref:fig-base-age-fits-ss-secondhalf-fr) French here

```{r fig-base-age-fits-secondhalf-ss, fig.cap = ifelse(fr(), "(ref:fig-base-age-fits-ss-secondhalf-fr)", "(ref:fig-base-age-fits-ss-secondhalf-en)")}
plot_age_fits_mcmc(base_model, gear = 2, yrs = 2008:2022, text_title_size = NULL)
```

(ref:fig-base-age-resids-ss-en) Age composition log standardized residuals for each sex for the Shoreside fleet. See Figure \@ref(fig:fig-base-age-resids-ft) for plot details.

(ref:fig-base-age-resids-ss-fr) French here

```{r fig-base-age-resids-ss, fig.cap = ifelse(fr(), "(ref:fig-base-age-resids-ss-fr)", "(ref:fig-base-age-resids-ss-en)")}
plot_age_resids_mcmc(base_model, gear = 2, text_title_size = NULL)
```

\clearpage

(ref:fig-base-age-fits-qcs-en) Age composition fits for each sex for the `r qcs`. See Figure \@ref(fig:fig-base-age-fits-ft) for plot details.

(ref:fig-base-age-fits-qcs-fr) French here

```{r fig-base-age-fits-qcs, fig.cap = ifelse(fr(), "(ref:fig-base-age-fits-qcs-fr)", "(ref:fig-base-age-fits-qcs-en)")}
plot_age_fits_mcmc(base_model, gear = 3, text_title_size = NULL)
```

(ref:fig-base-age-resids-qcs-en) Age composition log standardized residuals for each sex for the `r qcs`. See Figure \@ref(fig:fig-base-age-resids-ft) for plot details.

(ref:fig-base-age-resids-qcs-fr) French here

```{r fig-base-age-resids-qcs, fig.cap = ifelse(fr(), "(ref:fig-base-age-resids-qcs-fr)", "(ref:fig-base-age-resids-qcs-en)")}
plot_age_resids_mcmc(base_model, gear = 3, text_title_size = NULL)
```

\clearpage

(ref:fig-base-age-fits-hss-en) Age composition fits for each sex for the `r hss`. See Figure \@ref(fig:fig-base-age-fits-ft) for plot details.

(ref:fig-base-age-fits-hss-fr) French here

```{r fig-base-age-fits-hss, fig.cap = ifelse(fr(), "(ref:fig-base-age-fits-hss-fr)", "(ref:fig-base-age-fits-hss-en)")}
plot_age_fits_mcmc(base_model, gear = 4, text_title_size = NULL)
```

(ref:fig-base-age-resids-hss-en) Age composition log standardized residuals for each sex for the `r hss`. See Figure \@ref(fig:fig-base-age-resids-ft) for plot details.

(ref:fig-base-age-resids-hss-fr) French here

```{r fig-base-age-resids-hss, fig.cap = ifelse(fr(), "(ref:fig-base-age-resids-hss-fr)", "(ref:fig-base-age-resids-hss-en)")}
plot_age_resids_mcmc(base_model, gear = 4, text_title_size = NULL)
```

\clearpage

(ref:fig-base-age-fits-wcvis-en) Age composition fits for each sex for the `r wcvis`. See Figure \@ref(fig:fig-base-age-fits-ft) for plot details.

(ref:fig-base-age-fits-wcvis-fr) French here

```{r fig-base-age-fits-wcvis, fig.cap = ifelse(fr(), "(ref:fig-base-age-fits-wcvis-fr)", "(ref:fig-base-age-fits-wcvis-en)")}
plot_age_fits_mcmc(base_model, gear = 5, text_title_size = NULL)
```

(ref:fig-base-age-resids-wcvis-en) Age composition log standardized residuals for each sex for the `r wcvis`. See Figure \@ref(fig:fig-base-age-resids-ft) for plot details.

(ref:fig-base-age-resids-wcvis-fr) French here

```{r fig-base-age-resids-wcvis, fig.cap = ifelse(fr(), "(ref:fig-base-age-resids-wcvis-fr)", "(ref:fig-base-age-resids-wcvis-en)")}
plot_age_resids_mcmc(base_model, gear = 5, text_title_size = NULL)
```

\clearpage

(ref:fig-base-age-fits-wchgs-en) Age composition fits for each sex for the `r wchgs`. See Figure \@ref(fig:fig-base-age-fits-ft) for plot details.

(ref:fig-base-age-fits-wchgs-fr) French here

```{r fig-base-age-fits-wchgs, fig.cap = ifelse(fr(), "(ref:fig-base-age-fits-wchgs-fr)", "(ref:fig-base-age-fits-wchgs-en)")}
plot_age_fits_mcmc(base_model, gear = 6, text_title_size = NULL)
```

(ref:fig-base-age-resids-wchgs-en) Age composition log standardized residuals for each sex for the `r wchgs`. See Figure \@ref(fig:fig-base-age-resids-ft) for plot details.

(ref:fig-base-age-resids-wchgs-fr) French here

```{r fig-base-age-resids-wchgs, fig.cap = ifelse(fr(), "(ref:fig-base-age-resids-wchgs-fr)", "(ref:fig-base-age-resids-wchgs-en)")}
plot_age_resids_mcmc(base_model, gear = 6, text_title_size = NULL)
```

\clearpage

<!-- Selectivity ------------------------------------------------------------->

(ref:fig-base-selex-en) Estimated and fixed selectivities (Discard CPUE) for each sex for the base model. The dots are estimated selectivity-at-age, the shaded areas around are the 95% credible interval for those estimates. `r qcs` is not shown because it was estimated with time-varying selectivity. See Figure \@ref(fig:fig-base-mcmc-selex-qcs) for those plots.

(ref:fig-base-selex-fr) French goes here

```{r fig-base-mcmc-selex, fig.cap = ifelse(fr(), "(ref:fig-base-selex-fr)", "(ref:fig-base-selex-en)")}
plot_selex_mcmc(base_model)
```

(ref:fig-base-selex-qcs-en) Estimated selectivities for the `r qcs` in the base model. The time series is broken into selectivity blocks of years, `r qcs_sel_ranges`.

(ref:fig-base-selex-qcs-fr) French goes here

```{r fig-base-mcmc-selex-qcs, fig.cap = ifelse(fr(), "(ref:fig-base-selex-qcs-fr)", "(ref:fig-base-selex-qcs-en)")}
plot_selex_gear_mcmc(base_model, gear = 3)
```

<!-- Reference points -------------------------------------------------------->

(ref:fig-base-ref-points-en) Reference point posterior distributions for the base model. Subscripts are 1 = Freezer trawlers and 2 = Shoreside.

(ref:fig-base-ref-points-fr) Distributions postérieures des points de référence pour le modèle de base. Les indices sont 1 = chalutiers congélateurs et 2 = chalutiers côtiers.

```{r fig-base-ref-points, fig.cap = ifelse(fr(), "(ref:fig-base-ref-points-fr)", "(ref:fig-base-ref-points-en)")}
plot_ref_points(base_model)
```

<!-- Sensitivities ----------------------------------------------------------->

<!-- Vartheta and sigma ------------------------------------------------------>

(ref:fig-sens-variance-en) Spawning biomass for sensitivities pertaining to changes in the $\vartheta^2$ and $\rho$ parameters.

(ref:fig-sens-variance-fr) French here

```{r fig-sens-variance, fig.cap = ifelse(fr(), "(ref:fig-sens-variance-fr)", "(ref:fig-sens-variance-en)")}
plot_biomass_mcmc(models$sens_grps[[1]],
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-sens-variance-rel-en) Relative spawning biomass for sensitivities pertaining to changes in the $\vartheta^2$ and $\rho$ parameters.

(ref:fig-sens-variance-rel-fr) French here

```{r fig-sens-variance-rel, fig.cap = ifelse(fr(), "(ref:fig-sens-variance-rel-fr)", "(ref:fig-sens-variance-rel-en)")}
plot_biomass_mcmc(models$sens_grps[[1]],
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

<!-- Tau --------------------------------------------------------------------->

(ref:fig-sens-tau-en) Spawning biomass for sensitivities pertaining to changes in the $\tau$ parameter.

(ref:fig-sens-tau-fr) French here

```{r fig-sens-tau, fig.cap = ifelse(fr(), "(ref:fig-sens-tau-fr)", "(ref:fig-sens-tau-en)")}
plot_biomass_mcmc(models$sens_grps[[2]],
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-sens-variance-rel-en) Relative spawning biomass for sensitivities pertaining to changes in the $\tau$ parameter.

(ref:fig-sens-variance-rel-fr) French here

```{r fig-sens-tau-rel, fig.cap = ifelse(fr(), "(ref:fig-sens-tau-rel-fr)", "(ref:fig-sens-tau-rel-en)")}
plot_biomass_mcmc(models$sens_grps[[2]],
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

<!-- Steepness --------------------------------------------------------------->

(ref:fig-sens-steepness-en) Spawning biomass for sensitivities pertaining to changes in the Steepness ($h$) parameter.

(ref:fig-sens-steepness-fr) French here

```{r fig-sens-steepness, fig.cap = ifelse(fr(), "(ref:fig-sens-steepness-fr)", "(ref:fig-sens-steepness-en)")}
plot_biomass_mcmc(models$sens_grps[[3]],
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-sens-steepness-rel-en) Relative spawning biomass for sensitivities pertaining to changes in the Steepness ($h$) parameter.

(ref:fig-sens-steepness-rel-fr) French here

```{r fig-sens-steepness-rel, fig.cap = ifelse(fr(), "(ref:fig-sens-steepness-rel-fr)", "(ref:fig-sens-steepness-rel-en)")}
plot_biomass_mcmc(models$sens_grps[[3]],
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

<!-- Female M ---------------------------------------------------------------->

(ref:fig-sens-female-m-en) Spawning biomass for sensitivities pertaining to changes in the Female natural mortality ($M_{Female}$) parameter. In the base model, this parameter is fixed. In both sensitivities, it is estimated in addition to the changes in prior. The Male natural mortality parameter remains fixed.

(ref:fig-sens-female-m-fr) French here

```{r fig-sens-female-m, fig.cap = ifelse(fr(), "(ref:fig-sens-female-m-fr)", "(ref:fig-sens-female-m-en)")}
plot_biomass_mcmc(models$sens_grps[[4]],
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-sens-female-m-rel-en) Relative spawning biomass for sensitivities pertaining to changes in the Female natural mortality ($M_{Female}$) parameter.

(ref:fig-sens-female-m-rel-fr) French here

```{r fig-sens-female-m-rel, fig.cap = ifelse(fr(), "(ref:fig-sens-female-m-rel-fr)", "(ref:fig-sens-female-m-rel-en)")}
plot_biomass_mcmc(models$sens_grps[[4]],
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

<!-- Male M ------------------------------------------------------------------>

(ref:fig-sens-male-m-en) Spawning biomass for sensitivities pertaining to changes in the Male natural mortality ($M_{Male}$) parameter. In the base model, this parameter is fixed. In both sensitivities, it is estimated in addition to the changes in prior. The Female natural mortality parameter remains fixed.

(ref:fig-sens-male-m-fr) French here

```{r fig-sens-male-m, fig.cap = ifelse(fr(), "(ref:fig-sens-male-m-fr)", "(ref:fig-sens-male-m-en)")}
plot_biomass_mcmc(models$sens_grps[[5]],
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-sens-male-m-rel-en) Relative spawning biomass for sensitivities pertaining to changes in the Male natural mortality ($M_{Female}$) parameter.

(ref:fig-sens-male-m-rel-fr) French here

```{r fig-sens-male-m-rel, fig.cap = ifelse(fr(), "(ref:fig-sens-male-m-rel-fr)", "(ref:fig-sens-male-m-rel-en)")}
plot_biomass_mcmc(models$sens_grps[[5]],
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

<!-- Catchability ------------------------------------------------------------>

(ref:fig-sens-q-en) Spawning biomass for the sensitivities pertaining to changes in the Catchability ($q_k$) parameters. For these sensitivities all gears ($k$) are modified in the same way.

(ref:fig-sens-q-fr) French here

```{r fig-sens-q-m, fig.cap = ifelse(fr(), "(ref:fig-sens-q-fr)", "(ref:fig-sens-q-en)")}
plot_biomass_mcmc(models$sens_grps[[6]],
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-sens-q-rel-en) Relative spawning biomass for the sensitivities pertaining to changes in the Catchability ($q_k$) parameters.

(ref:fig-sens-q-rel-fr) French here

```{r fig-sens-q-rel, fig.cap = ifelse(fr(), "(ref:fig-sens-q-rel-fr)", "(ref:fig-sens-q-rel-en)")}
plot_biomass_mcmc(models$sens_grps[[6]],
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

<!-- Selectivity ------------------------------------------------------------->

(ref:fig-sens-selex-en) Spawning biomass for the sensitivity in which the Selectivity ($\hat{a}_k$ and $\gamma_k$) parameters are set equal to the maturity for the two commercial trawl gears ($k$).

(ref:fig-sens-selex-fr) French here

```{r fig-sens-selex-m, fig.cap = ifelse(fr(), "(ref:fig-sens-selex-fr)", "(ref:fig-sens-selex-en)")}
plot_biomass_mcmc(models$sens_grps[[7]],
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```

(ref:fig-sens-selex-rel-en) Relative spawning biomass for the sensitivities pertaining to changes in the Selectivity ($\hat{a}_k$ and $\gamma_k$) parameters.

(ref:fig-sens-selex-rel-fr) French here

```{r fig-sens-selex-rel, fig.cap = ifelse(fr(), "(ref:fig-sens-selex-rel-fr)", "(ref:fig-sens-selex-rel-en)")}
plot_biomass_mcmc(models$sens_grps[[7]],
                  rel = TRUE,
                  angle_x_labels = TRUE,
                  text_title_size = NULL,
                  show_bo_lines = TRUE)
```


\clearpage
