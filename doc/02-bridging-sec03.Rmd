## Two-fleet Single-sex models

Each model in this section is based on the previous one with only one change made so incremental changes can be tracked. The starting model here (*Update data to 2021*) is repeated from Section \@ref(single-fleet-female-only-models) so that relative differences in trends can be seen.

1. Modified the model to have two commercial fishing fleets. The two fleets represented are the Freezer trawlers which freeze their catch at sea and the wet boats which typically make one trawl of `r sp` at the end of trips which target other species in an effort to minimize the effects of proteolysis on the flesh.

1. Added the Discard CPUE index. The addition of this index was the same method as in the single-sex model (Section \@ref(single-fleet-female-only-models)).

(ref:fig-bridge3-biomass) Maximum Posterior Density (MPD) estimates of spawning biomass (top panel) and relative spawning biomass (bottom panel) for the 'Update data to 2021' and female-only models with two fleets.

(ref:fig-bridge3-biomass-french) French caption here

```{r bridge3-biomass, fig.cap = ifelse(french, "(ref:fig-bridge3-biomass-french)", "(ref:fig-bridge3-biomass)"), out.width = "100%" , fig.pos="H"}
cowplot::plot_grid(
  plot_ts_mpd(models$bridge_models[[3]],
              type = "sbt",
              legend_title = "Bridge models - 2 fleets, 1 sex"),
  plot_ts_mpd(models$bridge_models[[3]],
              type = "sbt",
              rel = TRUE,
              legend_title = "Bridge models - 2 fleets, 1 sex") + 
    coord_cartesian(ylim = c(0, 1)), nrow = 2)
```

(ref:fig-bridge3-recruitment) Maximum Posterior Density (MPD) estimates of recruitment for the 'Update data to 2021' and female-only models with two fleets.

(ref:fig-bridge3-recruitment-french) French caption here

```{r bridge3-recruitment, fig.cap = ifelse(french, "(ref:fig-bridge3-recruitment-french)", "(ref:fig-bridge3-recruitment)"), out.width = "100%" , fig.pos="H"}
plot_ts_mpd(models$bridge_models[[3]],
            type = "rt",
            legend_title = "Bridge models - 2 fleets, 1 sex") +
  coord_cartesian(ylim = c(0, 0.4))
```

(ref:fig-bridge3-index-fits) Maximum Posterior Density (MPD) index fits for the 'Update data to 2021 data' and female-only models with two fleets.

(ref:fig-bridge3-index-fits-french) French caption here

```{r bridge3-index-fits, fig.cap = ifelse(french, "(ref:fig-bridge3-index-fits-french)", "(ref:fig-bridge3-index-fits)"), out.width = "100%" , fig.pos="H"}
plot_index_fit_mpd(
  models$bridge_models[[3]],
  surv_index = survey_index,
  point_size = 1,
  legend_title = "Bridge models - 2 fleets, 1 sex")
```

\clearpage

```{r bridge3-param-settings-table, results = 'asis'}
param_settings_table(
  models$bridge_models[[3]][[2]],
  format = "latex",
  font_size = 7,
  caption = ifelse(
    french,
    "French goes here",
    "Number of parameters estimated, bounds, and prior parameterizations for the two-fleet model 'Change to two-fleet model'."))
```

```{r bridge3-param-table, results = 'asis'}
param_est_mpd_table(
  models$bridge_models[[3]],
  format = "latex",
  digits = 3,
  font_size = 7,
  model_col_widths = "5em",
  caption = ifelse(
    french,
    "French goes here",
    "Bridge model parameter estimates for the primary parameters, reference points, and catchability estimates ($q$) for each index for the models with two fleets and one sex.")) 
```

\clearpage

(ref:fig-bridge3-selectivities) Maximum Posterior Density (MPD) maturity ogives and selectivity estimates for all gears in the models with two fleets and one sex. The dashed red line is the female maturity ogive, the red line with points is the yearly selectivity estimate for females.

```{r bridge3-selectivities, fig.cap = "(ref:fig-bridge3-selectivities)"}
plist <- map2(models$bridge_models[[3]], names(models$bridge_models[[3]]), ~{
  plot_selex(.x, show_maturity = TRUE, title = .y) +
    theme(plot.title = element_text(face = "bold", size = 12),
          axis.text.x = element_text(size = 6),
          strip.text.x = element_text(size = 6))
})
n <- length(plist)
nrow <- floor(sqrt(n))
do.call("grid.arrange", c(plist, ncol = nrow))
```

```{r bridge3-sel-param-table, results = 'asis'}
sel_param_est_mpd_table(
  models$bridge_models[[3]],
  format = "latex",
  digits = 3,
  font_size = 7,
  model_col_widths = "5em",
  caption = ifelse(
    french,
    "French goes here",
    "A comparison of Bridge model selectivity parameter estimates for the two-fleet, single-sex models."))  %>% 
  column_spec(1, width = "8em")
```
